<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <title>회원가입</title>
  <link rel="stylesheet" href="/css/signupStyle.css">
</head>
<body>
<div id="con">
  <div id="login">
    <div id="login_form">
      <form method="post" action="/signup">
        <h3 class="login" style="letter-spacing:-1px;">회원가입</h3>
        <hr>
        <label for="userName">
          <p style="text-align: left; font-size:12px; color:#666"></p>
          <input type="text" id="userName" name="userName" placeholder="아이디" class="size" required>
          <p></p>
        </label>
        <button type="button" id="idCheckBtn" class="btns btn_st5" onclick="checkLoginId();" style="width: 20%; float: right;">중복 확인</button>
        <label for="password">
          <p style="text-align: left; font-size:12px; color:#666"></p>
          <input type="password" id="password" name="password" placeholder="비밀번호" class="size" required>
        </label>

        <label>
          <p style="text-align: left; font-size:12px; color:#666"></p>
          <input type="email" id="email" name="email" placeholder="이메일" class="size" required>
        </label>
        <br>
        <p>
          <input type="submit" value="가입하기" class="btn">
        </p>
      </form>
      <hr>
      <p class="find">
        <span><a href="/login">로그인 페이지로 이동</a></span>
      </p>
    </div>
  </div>
</div>

<!-- JavaScript 라이브러리 -->
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script>
  function checkLoginId() {
    const userName = document.getElementById("userName").value;

    // Ajax 요청을 통해 서버로 아이디 중복 확인 요청 전송
    // 예시: jQuery를 사용한 Ajax 요청
    $.ajax({
      url: "/checkMemberId",
      type: "POST",
      data: JSON.stringify({ userName: userName }),
      contentType: "application/json",
      success: function(response) {
        if (response) {
          // 아이디가 이미 존재하는 경우
          alert("이미 사용 중인 아이디입니다.");
        } else {
          // 아이디가 존재하지 않는 경우
          alert("사용 가능한 아이디입니다.");
        }
      },
      error: function(xhr, status, error) {
        // 에러 처리
        console.error(error);
      }
    });
  }

</script>

</body>
</html>
